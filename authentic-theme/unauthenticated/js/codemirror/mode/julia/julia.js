(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.defineMode("julia",function(B,y){function m(E,D){if(typeof D==="undefined"){D="\\b"}return new RegExp("^(("+E.join(")|(")+"))"+D)}var p="\\\\[0-7]{1,3}";var f="\\\\x[A-Fa-f0-9]{1,2}";var b="\\\\[abefnrtv0%?'\"\\\\]";var j="([^\\u0027\\u005C\\uD800-\\uDFFF]|[\\uD800-\\uDFFF][\\uDC00-\\uDFFF])";var t=y.operators||m(["\\.?[\\\\%*+\\-<>!=\\/^]=?","\\.?[|&\\u00F7\\u2260\\u2264\\u2265]","\\u00D7","\\u2208","\\u2209","\\u220B","\\u220C","\\u2229","\\u222A","\\u2286","\\u2288","\\u228A","\\u22c5","\\?","~",":","\\$","\\.[<>]","<<=?",">>>?=?","\\.[<>=]=","->?","\\/\\/","=>","<:","\\bin\\b(?!\\()"],"");var h=y.delimiters||/^[;,()[\]{}]/;var i=y.identifiers||/^[_A-Za-z\u00A1-\uFFFF][\w\u00A1-\uFFFF]*!*/;var q=m([p,f,b,j],"'");var n=m(["begin","function","type","immutable","let","macro","for","while","quote","if","else","elseif","try","finally","catch","do"]);var d=m(["end","else","elseif","catch","finally"]);var k=m(["if","else","elseif","while","for","begin","let","end","do","try","catch","finally","return","break","continue","global","local","const","export","import","importall","using","function","macro","module","baremodule","type","immutable","quote","typealias","abstract","bitstype"]);var e=m(["true","false","nothing","NaN","Inf"]);var A=/^@[_A-Za-z][\w]*/;var u=/^:[_A-Za-z\u00A1-\uFFFF][\w\u00A1-\uFFFF]*!*/;var l=/^(`|([_A-Za-z\u00A1-\uFFFF]*"("")?))/;function x(D){return w(D,"[")}function w(E,G){var F=v(E),D=v(E,1);if(typeof(G)==="undefined"){G="("}if(F===G||(D===G&&F==="for")){return true}return false}function v(D,E){if(typeof(E)==="undefined"){E=0}if(D.scopes.length<=E){return null}return D.scopes[D.scopes.length-(E+1)]}function C(J,F){if(J.match(/^#=/,false)){F.tokenize=o;return F.tokenize(J,F)}var K=F.leavingExpr;if(J.sol()){K=false}F.leavingExpr=false;if(K){if(J.match(/^'+/)){return"operator"}}if(J.match(/^\.{2,3}/)){return"operator"}if(J.eatSpace()){return null}var D=J.peek();if(D==="#"){J.skipToEnd();return"comment"}if(D==="["){F.scopes.push("[")}if(D==="("){F.scopes.push("(")}var L=v(F);if(x(F)&&D==="]"){if(L==="for"){F.scopes.pop()}F.scopes.pop();F.leavingExpr=true}if(w(F)&&D===")"){if(L==="for"){F.scopes.pop()}F.scopes.pop();F.leavingExpr=true}var G;if(G=J.match(n,false)){F.scopes.push(G[0])}if(J.match(d,false)){F.scopes.pop()}if(x(F)){if(F.lastToken=="end"&&J.match(/^:/)){return"operator"}if(J.match(/^end/)){return"number"}}if(J.match(/^::(?![:\$])/)){F.tokenize=c;return F.tokenize(J,F)}if(!K&&J.match(u)||J.match(/:\./)){return"builtin"}if(J.match(/^{[^}]*}(?=\()/)){return"builtin"}if(J.match(t)){return"operator"}if(J.match(/^[0-9\.]/,false)){var E=RegExp(/^im\b/);var H=false;if(J.match(/^\d*\.(?!\.)\d*([Eef][\+\-]?\d+)?/i)){H=true}if(J.match(/^\d+\.(?!\.)\d*/)){H=true}if(J.match(/^\.\d+/)){H=true}if(J.match(/^0x\.[0-9a-f]+p[\+\-]?\d+/i)){H=true}if(J.match(/^0x[0-9a-f]+/i)){H=true}if(J.match(/^0b[01]+/i)){H=true}if(J.match(/^0o[0-7]+/i)){H=true}if(J.match(/^[1-9]\d*(e[\+\-]?\d+)?/)){H=true}if(J.match(/^0(?![\dx])/i)){H=true}if(H){J.match(E);F.leavingExpr=true;return"number"}}if(J.match(/^'/)){F.tokenize=r;return F.tokenize(J,F)}if(J.match(l)){F.tokenize=s(J.current());return F.tokenize(J,F)}if(J.match(A)){return"meta"}if(J.match(h)){return null}if(J.match(k)){return"keyword"}if(J.match(e)){return"builtin"}var I=F.isDefinition||F.lastToken=="function"||F.lastToken=="macro"||F.lastToken=="type"||F.lastToken=="immutable";if(J.match(i)){if(I){if(J.peek()==="."){F.isDefinition=true;return"variable"}F.isDefinition=false;return"def"}if(J.match(/^({[^}]*})*\(/,false)){return z(J,F)}F.leavingExpr=true;return"variable"}J.next();return"error"}function z(G,F){var E=G.match(/^(\(\s*)/);if(E){if(F.firstParenPos<0){F.firstParenPos=F.scopes.length}F.scopes.push("(");F.charsAdvanced+=E[1].length}if(v(F)=="("&&G.match(/^\)/)){F.scopes.pop();F.charsAdvanced+=1;if(F.scopes.length<=F.firstParenPos){var D=G.match(/^\s*?=(?!=)/,false);G.backUp(F.charsAdvanced);F.firstParenPos=-1;F.charsAdvanced=0;if(D){return"def"}return"builtin"}}if(G.match(/^$/g,false)){G.backUp(F.charsAdvanced);while(F.scopes.length>F.firstParenPos){F.scopes.pop()}F.firstParenPos=-1;F.charsAdvanced=0;return"builtin"}F.charsAdvanced+=G.match(/^([^()]*)/)[1].length;return z(G,F)}function c(E,D){E.match(/.*?(?=,|;|{|}|\(|\)|=|$|\s)/);if(E.match(/^{/)){D.nestedLevels++}else{if(E.match(/^}/)){D.nestedLevels--}}if(D.nestedLevels>0){E.match(/.*?(?={|})/)}else{if(D.nestedLevels==0){D.tokenize=C}}return"builtin"}function o(E,D){if(E.match(/^#=/)){D.nestedLevels++}if(!E.match(/.*?(?=(#=|=#))/)){E.skipToEnd()}if(E.match(/^=#/)){D.nestedLevels--;if(D.nestedLevels==0){D.tokenize=C}}return"comment"}function r(H,G){var E=false,D;if(H.match(q)){E=true}else{if(D=H.match(/\\u([a-f0-9]{1,4})(?=')/i)){var F=parseInt(D[1],16);if(F<=55295||F>=57344){E=true;H.next()}}else{if(D=H.match(/\\U([A-Fa-f0-9]{5,8})(?=')/)){var F=parseInt(D[1],16);if(F<=1114111){E=true;H.next()}}}}if(E){G.leavingExpr=true;G.tokenize=C;return"string"}if(!H.match(/^[^']+(?=')/)){H.skipToEnd()}if(H.match(/^'/)){G.tokenize=C}return"error"}function s(D){if(D.substr(-3)==='"""'){D='"""'}else{if(D.substr(-1)==='"'){D='"'}}function E(G,F){if(G.eat("\\")){G.next()}else{if(G.match(D)){F.tokenize=C;F.leavingExpr=true;return"string"}else{G.eat(/[`"]/)}}G.eatWhile(/[^\\`"]/);return"string"}return E}var g={startState:function(){return{tokenize:C,scopes:[],lastToken:null,leavingExpr:false,isDefinition:false,nestedLevels:0,charsAdvanced:0,firstParenPos:-1}},token:function(G,E){var D=E.tokenize(G,E);var F=G.current();if(F&&D){E.lastToken=F}if(F==="."){D=G.match(i,false)||G.match(A,false)||G.match(/\(/,false)?"operator":"error"}return D},indent:function(E,D){var F=0;if(D==="]"||D===")"||D==="end"||D==="else"||D==="catch"||D==="elseif"||D==="finally"){F=-1}return(E.scopes.length+F)*B.indentUnit},electricInput:/\b(end|else|catch|finally)\b/,blockCommentStart:"#=",blockCommentEnd:"=#",lineComment:"#",fold:"indent"};return g});a.defineMIME("text/x-julia","julia")});