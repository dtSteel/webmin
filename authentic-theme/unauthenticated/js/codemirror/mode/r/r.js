(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.registerHelper("wordChars","r",/[\w.]/);a.defineMode("r",function(h){function b(u){var t=u.split(" "),s={};for(var r=0;r<t.length;++r){s[t[r]]=true}return s}var l=b("NULL NA Inf NaN NA_integer_ NA_real_ NA_complex_ NA_character_");var c=b("list quote bquote eval return call parse deparse");var k=b("if else repeat while function for in next break");var j=b("if else repeat while function for");var e=/[+\-*\/^<>=!&|~$:]/;var o;function i(u,s){o=null;var r=u.next();if(r=="#"){u.skipToEnd();return"comment"}else{if(r=="0"&&u.eat("x")){u.eatWhile(/[\da-f]/i);return"number"}else{if(r=="."&&u.eat(/\d/)){u.match(/\d*(?:e[+\-]?\d+)?/);return"number"}else{if(/\d/.test(r)){u.match(/\d*(?:\.\d+)?(?:e[+\-]\d+)?L?/);return"number"}else{if(r=="'"||r=='"'){s.tokenize=p(r);return"string"}else{if(r=="`"){u.match(/[^`]+`/);return"variable-3"}else{if(r=="."&&u.match(/.[.\d]+/)){return"keyword"}else{if(/[\w\.]/.test(r)&&r!="_"){u.eatWhile(/[\w\.]/);var t=u.current();if(l.propertyIsEnumerable(t)){return"atom"}if(k.propertyIsEnumerable(t)){if(j.propertyIsEnumerable(t)&&!u.match(/\s*if(\s+|$)/,false)){o="block"}return"keyword"}if(c.propertyIsEnumerable(t)){return"builtin"}return"variable"}else{if(r=="%"){if(u.skipTo("%")){u.next()}return"operator variable-2"}else{if((r=="<"&&u.eat("-"))||(r=="<"&&u.match("<-"))||(r=="-"&&u.match(/>>?/))){return"operator arrow"}else{if(r=="="&&s.ctx.argList){return"arg-is"}else{if(e.test(r)){if(r=="$"){return"operator dollar"}u.eatWhile(e);return"operator"}else{if(/[\(\){}\[\];]/.test(r)){o=r;if(r==";"){return"semi"}return null}else{return null}}}}}}}}}}}}}}function p(r){return function(v,u){if(v.eat("\\")){var t=v.next();if(t=="x"){v.match(/^[a-f0-9]{2}/i)}else{if((t=="u"||t=="U")&&v.eat("{")&&v.skipTo("}")){v.next()}else{if(t=="u"){v.match(/^[a-f0-9]{4}/i)}else{if(t=="U"){v.match(/^[a-f0-9]{8}/i)}else{if(/[0-7]/.test(t)){v.match(/^[0-7]{1,2}/)}}}}}return"string-2"}else{var s;while((s=v.next())!=null){if(s==r){u.tokenize=i;break}if(s=="\\"){v.backUp(1);break}}return"string"}}}var d=1,m=2,g=4;function n(s,r,t){s.ctx={type:r,indent:s.indent,flags:0,column:t.column(),prev:s.ctx}}function f(t,s){var r=t.ctx;t.ctx={type:r.type,indent:r.indent,flags:r.flags|s,column:r.column,prev:r.prev}}function q(r){r.indent=r.ctx.indent;r.ctx=r.ctx.prev}return{startState:function(){return{tokenize:i,ctx:{type:"top",indent:-h.indentUnit,flags:m},indent:0,afterIdent:false}},token:function(t,s){if(t.sol()){if((s.ctx.flags&3)==0){s.ctx.flags|=m}if(s.ctx.flags&g){q(s)}s.indent=t.indentation()}if(t.eatSpace()){return null}var r=s.tokenize(t,s);if(r!="comment"&&(s.ctx.flags&m)==0){f(s,d)}if((o==";"||o=="{"||o=="}")&&s.ctx.type=="block"){q(s)}if(o=="{"){n(s,"}",t)}else{if(o=="("){n(s,")",t);if(s.afterIdent){s.ctx.argList=true}}else{if(o=="["){n(s,"]",t)}else{if(o=="block"){n(s,"block",t)}else{if(o==s.ctx.type){q(s)}else{if(s.ctx.type=="block"&&r!="comment"){f(s,g)}}}}}}s.afterIdent=r=="variable"||r=="keyword";return r},indent:function(v,s){if(v.tokenize!=i){return 0}var u=s&&s.charAt(0),r=v.ctx,t=u==r.type;if(r.flags&g){r=r.prev}if(r.type=="block"){return r.indent+(u=="{"?0:h.indentUnit)}else{if(r.flags&d){return r.column+(t?0:1)}else{return r.indent+(t?0:h.indentUnit)}}},lineComment:"#"}});a.defineMIME("text/x-rsrc","r")});